{"ast":null,"code":"import NavigationBar from \"@/components/Navigation\";\nimport { biller, execute, parking, rent, trade } from \"@/api\";\nexport default {\n  name: \"ReceiptsNew\",\n  components: {\n    NavigationBar\n  },\n  data() {\n    return {\n      confirmCash: false,\n      phoneNumber: '',\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n      paymentData: {\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode: null\n      },\n      billNo: '',\n      billDetails: {\n        id: \"\",\n        billNo: \"\",\n        incomeTypeID: \"\",\n        incomeTypeDescription: \"\",\n        costCenterNo: \"\",\n        accountNo: \",\",\n        description: \"\",\n        feeID: \"\",\n        detailAmount: \"\",\n        receiptAmount: \"\",\n        billBalance: \"\",\n        wardID: \"\",\n        subCountyID: \"\",\n        status: \"\",\n        dateCreated: \"\"\n      },\n      billInfo: [],\n      message: null\n    };\n  },\n  mounted() {},\n  methods: {\n    formatPrice(value) {\n      var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'KES',\n        minimumFractionDigits: 2\n      });\n      return formatter.format(value);\n    },\n    getBill() {\n      if (this.billNo === '') {\n        alert('Please Enter Bill No');\n      } else {\n        const data = new FormData();\n        data.append(\"function\", \"getBill\");\n        data.append(\"billNo\", this.billNo);\n        execute(data, biller).then(res => {\n          if (res.data.success) {\n            this.billDetails = res.data.data.billDetails;\n            this.billInfo = res.data.data.billInfo;\n            this.paymentData.amount = res.data.data.billDetails.billBalance;\n            this.paymentData.accNo = res.data.data.billDetails.billNo;\n          } else {\n            this.message = res.data.message;\n          }\n        }).catch(e => {\n          //alert(e.message);\n          this.message = e.message;\n        });\n      }\n    },\n    showPaymentMethod() {\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      });\n      const routeData = this.$router.resolve({\n        name: 'bill'\n      });\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        });\n        const routeData = this.$router.resolve({\n          name: 'receipt'\n        });\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showTransactionSummary(paymentMode) {\n      this.paymentData.paymentMode = paymentMode;\n      if (paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false;\n    },\n    makePayment() {\n      if (this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber;\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          this.paymentMethod = false;\n          this.paymentPanel = false;\n          //start checking payment\n          this.timer = setInterval(() => {\n            this.checkPayment();\n          }, 3000);\n        } else {\n          this.rate = null;\n          alert(res.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1;\n      if (this.randomNumber === 1) {\n        this.message = \"Waiting for payment.\";\n      }\n      if (this.randomNumber === 2) {\n        this.message = \"Waiting for payment..\";\n      }\n      if (this.randomNumber === 3) {\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          clearInterval(this.timer);\n          this.receipt = true;\n          this.paymentData.success = false;\n          this.transaction = res.data.data.transaction;\n          this.receiptDetails = res.data.data.receipt.receiptDetails;\n          //Close the modal\n          this.transactionSummary = false;\n          this.transactionCompleted = true;\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["NavigationBar","biller","execute","parking","rent","trade","name","components","data","confirmCash","phoneNumber","transactionCompleted","transactionSummary","paymentPanel","paymentMethod","paymentData","accNo","payBillNo","amount","success","paymentMode","billNo","billDetails","id","incomeTypeID","incomeTypeDescription","costCenterNo","accountNo","description","feeID","detailAmount","receiptAmount","billBalance","wardID","subCountyID","status","dateCreated","billInfo","message","mounted","methods","formatPrice","value","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","format","getBill","alert","FormData","append","then","res","catch","e","showPaymentMethod","printBill","localStorage","JSON","stringify","routeData","$router","resolve","window","open","href","printReceipt","receiptDetails","receiptNo","showTransactionSummary","makePayment","stream","startsWith","timer","setInterval","checkPayment","rate","randomNumber","Math","floor","random","clearInterval","receipt","transaction"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/homabaytest/county-biller/src/components/ReceiptsNew.vue"],"sourcesContent":["<template>\n    <div>\n        <head>\n            <meta charset=\"utf-8\" />\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <meta content=\"Rental management system by Nouveta LTD\" name=\"description\" />\n            <meta content=\"Kelvin Njuguna\" name=\"author\" />\n            <!-- App favicon -->\n            <link rel=\"shortcut icon\" href=\"assets/images/favicon.png\">\n\n            <link href=\"assets/libs/select2/css/select2.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n            <link href=\"assets/libs/bootstrap-datepicker/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\">\n            <link href=\"assets/libs/spectrum-colorpicker2/spectrum.min.css\" rel=\"stylesheet\" type=\"text/css\">\n            <link href=\"assets/libs/bootstrap-timepicker/css/bootstrap-timepicker.min.css\" rel=\"stylesheet\" type=\"text/css\">\n            <link href=\"assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n            <link rel=\"stylesheet\" href=\"assets/libs/%40chenfengyuan/datepicker/datepicker.min.css\">\n\n\n\n            <!-- Bootstrap Css -->\n            <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n            <!-- Bootstrap select styling -->\n            <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css\">\n            <!-- Icons Css -->\n            <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n            <!-- App Css-->\n            <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n            <!-- custom Css-->\n            <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n        </head>\n\n        <body data-sidebar=\"dark\">\n\n        <NavigationBar/>\n\n        <!-- Search for bill -->\n        <div class=\"modal fade \" id=\"searchBillModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1 \" role=\"dialog \" aria-labelledby=\"staticBackdropLabel \" aria-hidden=\"true \">\n            <div class=\"modal-dialog modal-dialog-centered \">\n                <div class=\"modal-content \">\n                    <div class=\"modal-header border-bottom-0 \">\n                        <button type=\"button \" class=\"btn-close d-none\" data-dismiss=\"modal\"  aria-label=\"Close \"></button>\n                    </div>\n                    <div class=\"modal-body \">\n                        <div class=\"text-center mb-4 \">\n                            <div class=\"avatar-md mx-auto mb-4 \">\n                                <div class=\"avatar-title bg-light rounded-circle text-success h1 \">\n                                    <i class=\"bx bx-receipt \"></i>\n                                </div>\n                            </div>\n\n                            <div class=\"row justify-content-center \">\n                                <div class=\"col-xl-10 \">\n                                    <h4 class=\"text-primary \">Enter Bill Number To continue\n\n                                    </h4>\n                                    <p class=\"text-muted font-size-14 mb-4 \">\n                                        Enter bill No to continue.\n                                    </p>\n\n                                    <form>\n                                        <div class=\"row \">\n                                            <div class=\"col-12 \">\n                                                <div class=\"mb-3 \">\n                                                    <label for=\"digit1-input\" class=\"visually-hidden \">Bill No.</label>\n                                                    <input  v-model=\"billNo\" type=\"text\" class=\"form-control form-control-lg text-center two-step \" placeholder=\"Search for Bill\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <button data-dismiss=\"modal\" @click=\"getBill()\" type=\"button\" class=\"btn btn-success btn-block w-100 \">\n                                            <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2 \"></i>\n                                            Search\n                                        </button>\n                                    </form>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Search for bill -->\n\n        <!-- ============================================================== -->\n        <!-- Start right Content here -->\n        <!-- ============================================================== -->\n        <div class=\"main-content\">\n\n            <div class=\"page-content\">\n                <div class=\"container-fluid\">\n\n                    <!-- start page title -->\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <div class=\"page-title-box d-sm-flex align-items-center justify-content-between\">\n                                <h4 class=\"mb-sm-0 font-size-18 text-capitalize\">New Bill</h4>\n\n                                <div class=\"page-title-right\">\n                                    <ol class=\"breadcrumb m-0\">\n                                        <li class=\"breadcrumb-item\"><a href=\"index.html\">Home</a></li>\n                                        <li class=\"breadcrumb-item active\">Receipt Bill</li>\n                                    </ol>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                    <!-- end page title -->\n\n                    <!-- eTransactions table -->\n\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <div class=\"row d-flex justify-content-center align-items-center\">\n                                <div class=\"col-12\">\n                                    <div class=\"card\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row\">\n                                                <div class=\"col-12\">\n                                                    <div class=\"p-3 bg-success bg-soft mb-4\">\n                                                        <h4 class=\"p-0 m-0\">Bill No.{{billDetails.billNo}}</h4>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Billed Amount</p>\n                                                            <h5 class=\"mb-0 font-14px\">{{formatPrice(billDetails.detailAmount)}}</h5>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Paid Amount</p>\n                                                            <h5 class=\"mb-0 font-14px\">{{formatPrice(billDetails.receiptAmount)}}</h5>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Balance</p>\n                                                            <h5 class=\"mb-0 font-14px text-uppercase\">{{formatPrice(billDetails.billBalance)}}</h5>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Status</p>\n                                                            <span v-if=\"billDetails.status==='PAID'\" class=\"badge badge-soft-success text-uppercase\">{{billDetails.status}}</span>\n                                                            <span v-if=\"billDetails.status ==='UNPAID'\" class=\"badge badge-soft-danger text-uppercase\">{{billDetails.status}}</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                            </div>\n\n                                            <div class=\"col-12\">\n                                                <div class=\"table-responsive border-1\">\n                                                    <table class=\"table table-nowrap vertical-align-middle\">\n                                                        <thead class=\"bg-light\">\n                                                        <tr>\n                                                            <th style=\"width: 70px;\">No.</th>\n                                                            <th>Description</th>\n                                                            <th class=\"text-end\">Amount</th>\n\n                                                        </tr>\n                                                        </thead>\n                                                        <tfoot class=\"bg-light\">\n                                                        <tr>\n                                                            <td colspan=\"2\" class=\"border-0 text-end text-right\">\n                                                                <strong>Total</strong>\n                                                            </td>\n                                                            <td class=\"border-0 text-end text-right\">\n                                                                <h5 class=\"m-0 text-uppercase fw-bold\">{{formatPrice(billDetails.detailAmount)}}</h5>\n                                                            </td>\n\n                                                        </tr>\n                                                        </tfoot>\n                                                        <tbody>\n                                                        <tr v-for=\"(item, index) in billInfo\" :value=\"item\" :key=\"index\">\n                                                            <td>{{index+1}}</td>\n                                                            <td>\n                                                                <p class=\"mb-0 p-0 m-0\">{{item.description}}</p>\n                                                            </td>\n                                                            <td class=\"text-end text-right\">{{formatPrice(item.billTotal)}}</td>\n\n                                                        </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class=\"card-footer bg-white py-4\">\n                                            <div class=\"col-auto\">\n                                                <button type=\"submit\" data-toggle=\"modal\" data-target=\"#payment-modal\" class=\"btn btn-primary chat-send w-md waves-effect waves-light\"><span class=\"d-none d-sm-inline-block me-2\">Receive Payment</span> <i class=\"mdi mdi-send\"></i></button>\n                                                <button data-toggle=\"modal\" data-target=\"#searchBillModal\" style=\"margin-left: 10px\" ref=\"Close\"  type=\"button\" class=\"btn btn-success btn-block w-md \">\n                                                    <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2 \"></i>\n                                                    Search\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- end col -->\n                    </div>\n\n                    <!-- end row -->\n                </div>\n                <!-- container-fluid -->\n            </div>\n            <!-- End Page-content -->\n\n            <!-- payment modal -->\n            <div class=\"modal fade\" id=\"payment-modal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\n                <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header d-none\">\n                            <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                            <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                            </button>\n\n                        </div>\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-between align-items-center\">\n                                <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                                <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                                </button>\n                            </div>\n\n                            <div class=\"payment-panel-parent\">\n\n                                <div v-if=\"paymentPanel\" class=\"text-center payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                                    <div class=\"success-image mb-4 pb-4 pt-4\">\n                                        <img src=\"assets/images/bills.svg\" height=\"200\" alt=\"\">\n                                    </div>\n                                    <h4 class=\"text-black fw-bold\">{{message}}</h4>\n                                    <p class=\"text-muted mb-4\">Print the bill or receive payment for this bill.</p>\n                                    <div class=\"d-flex w-100 pb-2\">\n                                        <button @click=\"showPaymentMethod()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                            Proceed to Receive Payment\n                                        </button>\n                                        <a @click=\"printBill()\" target=\"_blank\" data-dismiss=\"\" type=\"button\" class=\"btn btn-outline-secondary waves-effect dismin-modal\">Print Bill</a>\n                                    </div>\n                                </div>\n\n                                <div v-if=\"paymentMethod\" class=\"send-method payment-panel \">\n                                    <label for=\"\" class=\"mb-0 pb-0\">Payment Method</label>\n                                    <p><small class=\"text-muted\">How would you like to send this money?</small></p>\n\n                                    <div>\n                                        <div class=\"accordion\" id=\"accordionExample\">\n                                            <div class=\"accordion-item\">\n                                                <h2 class=\"accordion-header\" id=\"headingOne\">\n                                                    <button class=\"accordion-button fw-medium\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/mpesa.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">MPESA</p>\n                                                            <p class=\"mb-0 p-0\"> <small>A payment request will be sent directly to the customer</small></p>\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n                                                        <div>\n                                                            <p>\n                                                                A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to the MPESA number you enter below.\n                                                            </p>\n                                                        </div>\n                                                        <div class=\"form-group\">\n                                                            <label for=\"\">MPESA Number</label>\n                                                            <div class=\"form-floating mb-3\">\n                                                                <input v-model=\"phoneNumber\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                                                <label for=\"floatingnameInput\">Phone No.</label>\n                                                            </div>\n\n                                                            <button @click=\"showTransactionSummary('MPESA')\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                                                <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                                                Send Payment Request\n                                                            </button>\n\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class=\"accordion-item\">\n                                                <h2 class=\"accordion-header\" id=\"headingTwo\">\n                                                    <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">Cash</p>\n                                                            <p class=\"mb-0 p-0\"> <small>By selecting this option you confirm that you have received the payment inform of cash</small></p>\n\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n\n                                                        <div class=\"form-check form-check-primary mb-3\">\n                                                            <input v-model=\"confirmCash\" class=\"form-check-input\" type=\"checkbox\" id=\"confirm-cash\">\n                                                            <label class=\"form-check-label\" for=\"confirm-cash\">\n                                                                Confirm having received <strong>KES {{billDetails.billBalance}}</strong>\n                                                            </label>\n                                                        </div>\n\n                                                        {{message}}\n                                                        <br/>\n                                                        <button v-if=\"confirmCash\" @click=\"showTransactionSummary('CASH')\"  type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                                            Receive Cash Payment\n                                                        </button>\n\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div v-if=\"transactionSummary\" class=\"transaction-summary payment-panel\">\n                                    <label for=\"\">Transaction Breakdown</label>\n                                    <div class=\"border p-4 rounded \">\n                                        <div class=\"row\">\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted \">\n                                                    BillO NO.\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{billDetails.billNo}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Bill For\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{billDetails.incomeTypeDescription}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Payment Method\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{paymentData.paymentMode}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Transaction Amount\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    KES {{billDetails.billBalance}}\n                                                </div>\n                                            </div>\n\n\n                                            <div class=\"col-12 text-black\"><hr class=\"mb-0 pb-0\"></div>\n\n                                            <div class=\"col-lg-6 text-uppercase\">\n                                                <div class=\"text-muted mt-2 font-21\">\n                                                    Total\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end text-uppercase\">\n                                                <div class=\" text-right text-black font-21 fw-bold\">\n                                                    KES {{billDetails.billBalance}}\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"mpesa-confirmation \">\n                                            <div v-if=\"paymentData.paymentMode=='MPESA'\">\n                                                <p class=\"text-muted mt-2\">A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to <strong class=\"text-black\"> phone number ({{ phoneNumber }})</strong> soon after you click the <strong class=\"text-black text-capitalize\">Send Request</strong> button bellow.\n                                                    <br>\n                                                    <br>\n                                                    Remember to <strong class=\"text-black\">Check your phone</strong> to confirm payment by entering your Mpesa pin.</p>\n                                            </div>\n\n                                            <div>{{message}}  </div>\n                                            <br>\n                                            <button @click=\"makePayment()\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect btn-send waves-light text-center w-100\">\n                                                <div class=\"d-flex justify-content-center align-items-center\">\n                                                    <div class=\"stk-timer-container d-none justify-content-center align-items-center\">\n                                                        <span class=\"mdi mdi-timer-outline font-16px\"></span>\n                                                        <span class=\"stk-timer px-2\"></span>\n                                                    </div>\n                                                    <div class=\"justify-content-center align-items-center d-flex\">\n                                                        <span class=\"px-2\">Send Request</span>\n                                                        <div class=\"flip-x\"><i class=\"mdi mdi-reply ms-3 font-16px\"></i></div>\n                                                    </div>\n                                                </div>\n                                            </button>\n                                        </div>\n\n\n                                    </div>\n                                </div>\n\n                                <div v-if=\"transactionCompleted\" class=\"text-center d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                                    <div class=\"success-image mb-4\">\n                                        <img src=\"assets/images/payment-confirmation-images/sent.svg\" height=\"200\" alt=\"\">\n                                    </div>\n                                    <h4 class=\"text-blink-primary fw-bold\">Transaction Complete</h4>\n                                    <p class=\"text-muted mb-4\"><strong class=\"text-black\">KES {{receiptDetails.receiptAmount}}</strong> has been received for <strong class=\"text-black\">Bill No. {{receiptDetails.billNo}}</strong></p>\n                                    <button @click=\"printReceipt()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                        <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                        Print Receipt\n                                    </button>\n                                </div>\n\n\n\n                            </div>\n                        </div>\n                        <div class=\"modal-footer d-flex d-none bill-modal-footer\">\n                            <button href=\"javascript: void(0);\" disabled class=\"btn btn-outline-light waves-effect waves-light payment-prev\"> <i class=\"mdi mdi-arrow-left ms-1\"></i>Previouse</button>\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary waves-effect waves-light payment-next\">Next <i class=\"mdi mdi-arrow-right ms-1\"></i></button>\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect waves-light text-center d-none\">\n                                <div class=\"d-flex justify-content-center align-items-center\"> <span>Send Money</span> <div class=\"flip-x\"><i class=\"mdi mdi-reply flip-x ms-3 font-16px\"></i></div></div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- end of payment modal-->\n            <footer class=\"footer \">\n                <div class=\"container-fluid \">\n                    <div class=\"row \">\n                        <div class=\"col-sm-6 \">\n                           © County\n                        </div>\n                        <div class=\"col-sm-6 \">\n                            <div class=\"text-sm-end d-sm-block\">\n                                A product of County\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </footer>\n        </div>\n\n        </body>\n\n\n    </div>\n</template>\n\n<script>\n    import NavigationBar from \"@/components/Navigation\";\n    import {biller, execute, parking, rent, trade} from \"@/api\";\n    export default {\n        name: \"ReceiptsNew\",\n        components: {NavigationBar},\n        data(){\n            return{\n                confirmCash: false,\n                phoneNumber:'',\n                transactionCompleted: false,\n                transactionSummary: false,\n                paymentPanel: true,\n                paymentMethod: false,\n                paymentData: {\n                    accNo: null,\n                    payBillNo: null,\n                    amount: null,\n                    phoneNumber: null,\n                    success: false,\n                    paymentMode:null\n                },\n                billNo:'',\n                billDetails:{\n                    id: \"\",\n                    billNo: \"\",\n                    incomeTypeID: \"\",\n                    incomeTypeDescription: \"\",\n                    costCenterNo: \"\",\n                    accountNo: \",\",\n                    description: \"\",\n                    feeID: \"\",\n                    detailAmount: \"\",\n                    receiptAmount: \"\",\n                    billBalance: \"\",\n                    wardID: \"\",\n                    subCountyID: \"\",\n                    status: \"\",\n                    dateCreated: \"\"\n                },\n                billInfo:[],\n                message:null\n            }\n        },\n        mounted() {\n        },\n        methods:{\n            formatPrice(value) {\n                var formatter = new Intl.NumberFormat('en-US', {\n                    style: 'currency',\n                    currency: 'KES',\n                    minimumFractionDigits: 2\n                });\n                return formatter.format(value);\n            },\n            getBill(){\n                if(this.billNo === ''){\n                    alert('Please Enter Bill No')\n                }else {\n                    const data = new FormData();\n                    data.append(\"function\", \"getBill\");\n                    data.append(\"billNo\", this.billNo);\n                    execute(data,biller)\n                        .then((res) =>{\n                            if (res.data.success) {\n                                this.billDetails = res.data.data.billDetails\n                                this.billInfo = res.data.data.billInfo\n                                this.paymentData.amount = res.data.data.billDetails.billBalance\n                                this.paymentData.accNo = res.data.data.billDetails.billNo\n                            }else{\n                                this.message =res.data.message\n                            }\n                        })\n                        .catch((e) => {\n                            //alert(e.message);\n                            this.message =e.message\n                        });\n                }\n\n            },\n            showPaymentMethod(){\n                this.paymentMethod = true;\n                this.paymentPanel = false;\n                this.transactionSummary = false;\n                this.transactionCompleted = false\n            },\n            printBill(){\n                localStorage['params'] = JSON.stringify({\n                    billNo: this.billDetails.billNo\n                })\n                const routeData = this.$router.resolve({name: 'bill'});\n                window.open(routeData.href, '_blank');\n            },\n            printReceipt() {\n                if (this.receiptDetails.receiptNo == null) {\n                    alert(\"Try again later\");\n                } else {\n                    //  this.$refs.closeReceived.click();\n                    localStorage['params'] = JSON.stringify({\n                        receiptNo: this.receiptDetails.receiptNo\n                    })\n                    const routeData = this.$router.resolve({name: 'receipt'});\n                    window.open(routeData.href, '_blank');\n                }\n            },\n            showTransactionSummary(paymentMode){\n\n                this.paymentData.paymentMode = paymentMode\n\n                if(paymentMode === \"MPESA\") {\n                    if (this.phoneNumber == null) {\n                        alert(\"Enter phone number\");\n                        return;\n                    }\n                }\n\n                this.paymentMethod = false;\n                this.paymentPanel = false;\n                this.transactionSummary = true;\n                this.transactionCompleted = false\n            },\n            makePayment() {\n                if(this.paymentData.paymentMode === \"MPESA\") {\n                    if (this.phoneNumber == null) {\n                        alert(\"Enter phone number\");\n                        return;\n                    }\n                }\n                this.message = \"Payment Request sent\";\n                this.paymentData.phoneNumber = this.phoneNumber\n\n                const data = new FormData();\n                data.append(\"function\", \"makePayment\");\n                data.append(\"paymentData\", JSON.stringify(this.paymentData));\n\n                let stream = null;\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\n                    stream = trade;\n                }\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\n                    stream = parking;\n                }\n\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\n                    stream = rent;\n                }\n\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\n                    stream = biller;\n                }\n\n                execute(data, stream)\n                    .then((res) => {\n                        if (res.data.success) {\n                            this.paymentMethod = false;\n                            this.paymentPanel = false;\n                            //start checking payment\n                            this.timer = setInterval(() => {\n\n                                this.checkPayment();\n                            }, 3000);\n                        } else {\n                            this.rate = null;\n                            alert(res.data.message);\n                        }\n                    })\n                    .catch((e) => {\n                        alert(e.message);\n                    });\n            },\n            checkPayment() {\n                this.randomNumber = Math.floor(Math.random() * 3) + 1\n                if(this.randomNumber === 1){\n                    this.message = \"Waiting for payment.\";\n                }\n                if(this.randomNumber === 2){\n                    this.message = \"Waiting for payment..\";\n                }\n                if(this.randomNumber ===3){\n                    this.message = \"Waiting for payment...\";\n                }\n                const data = new FormData();\n                data.append(\"function\", \"checkPayment\");\n                data.append(\"accountRef\", this.paymentData.accNo);\n\n                let stream = null;\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\n                    stream = trade;\n                }\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\n                    stream = parking;\n                }\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\n                    stream = rent;\n                }\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\n                    stream = biller;\n                }\n                execute(data, stream)\n                    .then((res) => {\n                        if (res.data.success) {\n                            clearInterval(this.timer);\n                            this.receipt = true;\n                            this.paymentData.success = false;\n                            this.transaction = res.data.data.transaction;\n                            this.receiptDetails = res.data.data.receipt.receiptDetails\n                            //Close the modal\n                            this.transactionSummary = false\n                            this.transactionCompleted = true\n                        }\n                    })\n                    .catch((e) => {\n                        alert(e.message);\n                    });\n            },\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}