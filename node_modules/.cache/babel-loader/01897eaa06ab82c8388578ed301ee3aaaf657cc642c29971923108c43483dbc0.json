{"ast":null,"code":"import NavigationBar from \"@/components/Navigation\";\nimport { biller, execute, parking, rent, trade } from \"@/api\";\nexport default {\n  name: \"ReceiptsNew\",\n  components: {\n    NavigationBar\n  },\n  data() {\n    return {\n      confirmCash: false,\n      phoneNumber: '',\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n      paymentData: {\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode: null\n      },\n      billNo: '',\n      billDetails: {\n        id: \"\",\n        billNo: \"\",\n        incomeTypeID: \"\",\n        incomeTypeDescription: \"\",\n        costCenterNo: \"\",\n        accountNo: \",\",\n        description: \"\",\n        feeID: \"\",\n        detailAmount: \"\",\n        receiptAmount: \"\",\n        billBalance: \"\",\n        wardID: \"\",\n        subCountyID: \"\",\n        status: \"\",\n        dateCreated: \"\"\n      },\n      billInfo: [],\n      message: null\n    };\n  },\n  mounted() {},\n  methods: {\n    formatPrice(value) {\n      var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'KES',\n        minimumFractionDigits: 2\n      });\n      return formatter.format(value);\n    },\n    getBill() {\n      if (this.billNo === '') {\n        alert('Please Enter Bill No');\n      } else {\n        const data = new FormData();\n        data.append(\"function\", \"getBill\");\n        data.append(\"billNo\", this.billNo);\n        execute(data, biller).then(res => {\n          if (res.data.success) {\n            this.billDetails = res.data.data.billDetails;\n            this.billInfo = res.data.data.billInfo;\n            this.paymentData.amount = res.data.data.billDetails.billBalance;\n            this.paymentData.accNo = res.data.data.billDetails.billNo;\n          } else {\n            this.message = res.data.message;\n          }\n        }).catch(e => {\n          //alert(e.message);\n          this.message = e.message;\n        });\n      }\n    },\n    showPaymentMethod() {\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      });\n      const routeData = this.$router.resolve({\n        name: 'bill'\n      });\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        });\n        const routeData = this.$router.resolve({\n          name: 'receipt'\n        });\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showTransactionSummary(paymentMode) {\n      this.paymentData.paymentMode = paymentMode;\n      if (paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false;\n    },\n    makePayment() {\n      if (this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber;\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          this.paymentMethod = false;\n          this.paymentPanel = false;\n          //start checking payment\n          this.timer = setInterval(() => {\n            this.checkPayment();\n          }, 3000);\n        } else {\n          this.rate = null;\n          alert(res.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1;\n      if (this.randomNumber === 1) {\n        this.message = \"Waiting for payment.\";\n      }\n      if (this.randomNumber === 2) {\n        this.message = \"Waiting for payment..\";\n      }\n      if (this.randomNumber === 3) {\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          clearInterval(this.timer);\n          this.receipt = true;\n          this.paymentData.success = false;\n          this.transaction = res.data.data.transaction;\n          this.receiptDetails = res.data.data.receipt.receiptDetails;\n          //Close the modal\n          this.transactionSummary = false;\n          this.transactionCompleted = true;\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["NavigationBar","biller","execute","parking","rent","trade","name","components","data","confirmCash","phoneNumber","transactionCompleted","transactionSummary","paymentPanel","paymentMethod","paymentData","accNo","payBillNo","amount","success","paymentMode","billNo","billDetails","id","incomeTypeID","incomeTypeDescription","costCenterNo","accountNo","description","feeID","detailAmount","receiptAmount","billBalance","wardID","subCountyID","status","dateCreated","billInfo","message","mounted","methods","formatPrice","value","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","format","getBill","alert","FormData","append","then","res","catch","e","showPaymentMethod","printBill","localStorage","JSON","stringify","routeData","$router","resolve","window","open","href","printReceipt","receiptDetails","receiptNo","showTransactionSummary","makePayment","stream","startsWith","timer","setInterval","checkPayment","rate","randomNumber","Math","floor","random","clearInterval","receipt","transaction"],"sources":["C:\\My Projects\\Levetot\\Vue projects\\county biller green\\src\\components\\ReceiptsNew.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <head>\r\n            <meta charset=\"utf-8\" />\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            <meta content=\"Rental management system by Nouveta LTD\" name=\"description\" />\r\n            <meta content=\"Kelvin Njuguna\" name=\"author\" />\r\n            <!-- App favicon -->\r\n            <link rel=\"shortcut icon\" href=\"assets/images/favicon.png\">\r\n\r\n            <link href=\"assets/libs/select2/css/select2.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n\r\n            <link href=\"assets/libs/bootstrap-datepicker/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\">\r\n            <link href=\"assets/libs/spectrum-colorpicker2/spectrum.min.css\" rel=\"stylesheet\" type=\"text/css\">\r\n            <link href=\"assets/libs/bootstrap-timepicker/css/bootstrap-timepicker.min.css\" rel=\"stylesheet\" type=\"text/css\">\r\n            <link href=\"assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n            <link rel=\"stylesheet\" href=\"assets/libs/%40chenfengyuan/datepicker/datepicker.min.css\">\r\n\r\n\r\n\r\n            <!-- Bootstrap Css -->\r\n            <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\r\n            <!-- Bootstrap select styling -->\r\n            <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css\">\r\n            <!-- Icons Css -->\r\n            <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n            <!-- App Css-->\r\n            <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\r\n            <!-- custom Css-->\r\n            <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\r\n        </head>\r\n\r\n        <body data-sidebar=\"dark\">\r\n\r\n        <NavigationBar/>\r\n\r\n        <!-- Search for bill -->\r\n        <div class=\"modal fade \" id=\"searchBillModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1 \" role=\"dialog \" aria-labelledby=\"staticBackdropLabel \" aria-hidden=\"true \">\r\n            <div class=\"modal-dialog modal-dialog-centered \">\r\n                <div class=\"modal-content \">\r\n                    <div class=\"modal-header border-bottom-0 \">\r\n                        <button type=\"button \" class=\"btn-close d-none\" data-dismiss=\"modal\"  aria-label=\"Close \"></button>\r\n                    </div>\r\n                    <div class=\"modal-body \">\r\n                        <div class=\"text-center mb-4 \">\r\n                            <div class=\"avatar-md mx-auto mb-4 \">\r\n                                <div class=\"avatar-title bg-light rounded-circle text-success h1 \">\r\n                                    <i class=\"bx bx-receipt \"></i>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"row justify-content-center \">\r\n                                <div class=\"col-xl-10 \">\r\n                                    <h4 class=\"text-primary \">Enter Bill Number To continue\r\n\r\n                                    </h4>\r\n                                    <p class=\"text-muted font-size-14 mb-4 \">\r\n                                        Enter bill No to continue.\r\n                                    </p>\r\n\r\n                                    <form>\r\n                                        <div class=\"row \">\r\n                                            <div class=\"col-12 \">\r\n                                                <div class=\"mb-3 \">\r\n                                                    <label for=\"digit1-input\" class=\"visually-hidden \">Bill No.</label>\r\n                                                    <input  v-model=\"billNo\" type=\"text\" class=\"form-control form-control-lg text-center two-step \" placeholder=\"Search for Bill\">\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <button data-dismiss=\"modal\" @click=\"getBill()\" type=\"button\" class=\"btn btn-success btn-block w-100 \">\r\n                                            <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2 \"></i>\r\n                                            Search\r\n                                        </button>\r\n                                    </form>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- Search for bill -->\r\n\r\n        <!-- ============================================================== -->\r\n        <!-- Start right Content here -->\r\n        <!-- ============================================================== -->\r\n        <div class=\"main-content\">\r\n\r\n            <div class=\"page-content\">\r\n                <div class=\"container-fluid\">\r\n\r\n                    <!-- start page title -->\r\n                    <div class=\"row\">\r\n                        <div class=\"col-12\">\r\n                            <div class=\"page-title-box d-sm-flex align-items-center justify-content-between\">\r\n                                <h4 class=\"mb-sm-0 font-size-18 text-capitalize\">New Bill</h4>\r\n\r\n                                <div class=\"page-title-right\">\r\n                                    <ol class=\"breadcrumb m-0\">\r\n                                        <li class=\"breadcrumb-item\"><a href=\"index.html\">Home</a></li>\r\n                                        <li class=\"breadcrumb-item active\">Receipt Bill</li>\r\n                                    </ol>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- end page title -->\r\n\r\n                    <!-- eTransactions table -->\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-12\">\r\n                            <div class=\"row d-flex justify-content-center align-items-center\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"card\">\r\n                                        <div class=\"card-body\">\r\n                                            <div class=\"row\">\r\n                                                <div class=\"col-12\">\r\n                                                    <div class=\"p-3 bg-success bg-soft mb-4\">\r\n                                                        <h4 class=\"p-0 m-0\">Bill No.{{billDetails.billNo}}</h4>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-3 mb-4\">\r\n                                                    <div class=\"d-flex\">\r\n\r\n                                                        <div class=\"flex-grow-1\">\r\n                                                            <p class=\"text-muted mb-0\">Billed Amount</p>\r\n                                                            <h5 class=\"mb-0 font-14px\">{{formatPrice(billDetails.detailAmount)}}</h5>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-3 mb-4\">\r\n                                                    <div class=\"d-flex\">\r\n                                                        <div class=\"flex-grow-1\">\r\n                                                            <p class=\"text-muted mb-0\">Paid Amount</p>\r\n                                                            <h5 class=\"mb-0 font-14px\">{{formatPrice(billDetails.receiptAmount)}}</h5>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class=\"col-3 mb-4\">\r\n                                                    <div class=\"d-flex\">\r\n                                                        <div class=\"flex-grow-1\">\r\n                                                            <p class=\"text-muted mb-0\">Balance</p>\r\n                                                            <h5 class=\"mb-0 font-14px text-uppercase\">{{formatPrice(billDetails.billBalance)}}</h5>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class=\"col-3 mb-4\">\r\n                                                    <div class=\"d-flex\">\r\n                                                        <div class=\"flex-grow-1\">\r\n                                                            <p class=\"text-muted mb-0\">Status</p>\r\n                                                            <span v-if=\"billDetails.status==='PAID'\" class=\"badge badge-soft-success text-uppercase\">{{billDetails.status}}</span>\r\n                                                            <span v-if=\"billDetails.status ==='UNPAID'\" class=\"badge badge-soft-danger text-uppercase\">{{billDetails.status}}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                            </div>\r\n\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"table-responsive border-1\">\r\n                                                    <table class=\"table table-nowrap vertical-align-middle\">\r\n                                                        <thead class=\"bg-light\">\r\n                                                        <tr>\r\n                                                            <th style=\"width: 70px;\">No.</th>\r\n                                                            <th>Description</th>\r\n                                                            <th class=\"text-end\">Amount</th>\r\n\r\n                                                        </tr>\r\n                                                        </thead>\r\n                                                        <tfoot class=\"bg-light\">\r\n                                                        <tr>\r\n                                                            <td colspan=\"2\" class=\"border-0 text-end text-right\">\r\n                                                                <strong>Total</strong>\r\n                                                            </td>\r\n                                                            <td class=\"border-0 text-end text-right\">\r\n                                                                <h5 class=\"m-0 text-uppercase fw-bold\">{{formatPrice(billDetails.detailAmount)}}</h5>\r\n                                                            </td>\r\n\r\n                                                        </tr>\r\n                                                        </tfoot>\r\n                                                        <tbody>\r\n                                                        <tr v-for=\"(item, index) in billInfo\" :value=\"item\" :key=\"index\">\r\n                                                            <td>{{index+1}}</td>\r\n                                                            <td>\r\n                                                                <p class=\"mb-0 p-0 m-0\">{{item.description}}</p>\r\n                                                            </td>\r\n                                                            <td class=\"text-end text-right\">{{formatPrice(item.billTotal)}}</td>\r\n\r\n                                                        </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"card-footer bg-white py-4\">\r\n                                            <div class=\"col-auto\">\r\n                                                <button type=\"submit\" data-toggle=\"modal\" data-target=\"#payment-modal\" class=\"btn btn-primary chat-send w-md waves-effect waves-light\"><span class=\"d-none d-sm-inline-block me-2\">Receive Payment</span> <i class=\"mdi mdi-send\"></i></button>\r\n                                                <button data-toggle=\"modal\" data-target=\"#searchBillModal\" style=\"margin-left: 10px\" ref=\"Close\"  type=\"button\" class=\"btn btn-success btn-block w-md \">\r\n                                                    <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2 \"></i>\r\n                                                    Search\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- end col -->\r\n                    </div>\r\n\r\n                    <!-- end row -->\r\n                </div>\r\n                <!-- container-fluid -->\r\n            </div>\r\n            <!-- End Page-content -->\r\n\r\n            <!-- payment modal -->\r\n            <div class=\"modal fade\" id=\"payment-modal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\r\n                <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                    <div class=\"modal-content\">\r\n                        <div class=\"modal-header d-none\">\r\n                            <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\r\n\r\n\r\n                            <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\r\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\r\n                            <i class=\"bx bx-x\"></i>\r\n                        </span>\r\n                            </button>\r\n\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            <div class=\"d-flex justify-content-between align-items-center\">\r\n                                <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\r\n\r\n\r\n                                <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\r\n                            <i class=\"bx bx-x\"></i>\r\n                        </span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div class=\"payment-panel-parent\">\r\n\r\n                                <div v-if=\"paymentPanel\" class=\"text-center payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\r\n                                    <div class=\"success-image mb-4 pb-4 pt-4\">\r\n                                        <img src=\"assets/images/bills.svg\" height=\"200\" alt=\"\">\r\n                                    </div>\r\n                                    <h4 class=\"text-black fw-bold\">{{message}}</h4>\r\n                                    <p class=\"text-muted mb-4\">Print the bill or receive payment for this bill.</p>\r\n                                    <div class=\"d-flex w-100 pb-2\">\r\n                                        <button @click=\"showPaymentMethod()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\r\n                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\r\n                                            Proceed to Receive Payment\r\n                                        </button>\r\n                                        <a @click=\"printBill()\" target=\"_blank\" data-dismiss=\"\" type=\"button\" class=\"btn btn-outline-secondary waves-effect dismin-modal\">Print Bill</a>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div v-if=\"paymentMethod\" class=\"send-method payment-panel \">\r\n                                    <label for=\"\" class=\"mb-0 pb-0\">Payment Method</label>\r\n                                    <p><small class=\"text-muted\">How would you like to send this money?</small></p>\r\n\r\n                                    <div>\r\n                                        <div class=\"accordion\" id=\"accordionExample\">\r\n                                            <div class=\"accordion-item\">\r\n                                                <h2 class=\"accordion-header\" id=\"headingOne\">\r\n                                                    <button class=\"accordion-button fw-medium\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n                                                        <div class=\"flex-shrink-0 me-3\">\r\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/mpesa.jpg\" alt=\"Mobile Money\" height=\"65\">\r\n                                                        </div>\r\n                                                        <div class=\"d-flex flex-column\">\r\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">MPESA</p>\r\n                                                            <p class=\"mb-0 p-0\"> <small>A payment request will be sent directly to the customer</small></p>\r\n                                                        </div>\r\n                                                    </button>\r\n                                                </h2>\r\n                                                <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n                                                    <div class=\"accordion-body\">\r\n                                                        <div>\r\n                                                            <p>\r\n                                                                A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to the MPESA number you enter below.\r\n                                                            </p>\r\n                                                        </div>\r\n                                                        <div class=\"form-group\">\r\n                                                            <label for=\"\">MPESA Number</label>\r\n                                                            <div class=\"form-floating mb-3\">\r\n                                                                <input v-model=\"phoneNumber\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\r\n                                                                <label for=\"floatingnameInput\">Phone No.</label>\r\n                                                            </div>\r\n\r\n                                                            <button @click=\"showTransactionSummary('MPESA')\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\r\n                                                                <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\r\n                                                                Send Payment Request\r\n                                                            </button>\r\n\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"accordion-item\">\r\n                                                <h2 class=\"accordion-header\" id=\"headingTwo\">\r\n                                                    <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\r\n                                                        <div class=\"flex-shrink-0 me-3\">\r\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\r\n                                                        </div>\r\n                                                        <div class=\"d-flex flex-column\">\r\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">Cash</p>\r\n                                                            <p class=\"mb-0 p-0\"> <small>By selecting this option you confirm that you have received the payment inform of cash</small></p>\r\n\r\n                                                        </div>\r\n                                                    </button>\r\n                                                </h2>\r\n                                                <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\r\n                                                    <div class=\"accordion-body\">\r\n\r\n                                                        <div class=\"form-check form-check-primary mb-3\">\r\n                                                            <input v-model=\"confirmCash\" class=\"form-check-input\" type=\"checkbox\" id=\"confirm-cash\">\r\n                                                            <label class=\"form-check-label\" for=\"confirm-cash\">\r\n                                                                Confirm having received <strong>KES {{billDetails.billBalance}}</strong>\r\n                                                            </label>\r\n                                                        </div>\r\n\r\n                                                        {{message}}\r\n                                                        <br/>\r\n                                                        <button v-if=\"confirmCash\" @click=\"showTransactionSummary('CASH')\"  type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\r\n                                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\r\n                                                            Receive Cash Payment\r\n                                                        </button>\r\n\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div v-if=\"transactionSummary\" class=\"transaction-summary payment-panel\">\r\n                                    <label for=\"\">Transaction Breakdown</label>\r\n                                    <div class=\"border p-4 rounded \">\r\n                                        <div class=\"row\">\r\n                                            <div class=\"col-lg-6\">\r\n                                                <div class=\"text-muted \">\r\n                                                    BillO NO.\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6 align-self-end\">\r\n                                                <div class=\" text-right text-black\">\r\n                                                    {{billDetails.billNo}}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6\">\r\n                                                <div class=\"text-muted mt-2\">\r\n                                                    Bill For\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6 align-self-end\">\r\n                                                <div class=\" text-right text-black\">\r\n                                                    {{billDetails.incomeTypeDescription}}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6\">\r\n                                                <div class=\"text-muted mt-2\">\r\n                                                    Payment Method\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6 align-self-end\">\r\n                                                <div class=\" text-right text-black\">\r\n                                                    {{paymentData.paymentMode}}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6\">\r\n                                                <div class=\"text-muted mt-2\">\r\n                                                    Transaction Amount\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6 align-self-end\">\r\n                                                <div class=\" text-right text-black\">\r\n                                                    KES {{billDetails.billBalance}}\r\n                                                </div>\r\n                                            </div>\r\n\r\n\r\n                                            <div class=\"col-12 text-black\"><hr class=\"mb-0 pb-0\"></div>\r\n\r\n                                            <div class=\"col-lg-6 text-uppercase\">\r\n                                                <div class=\"text-muted mt-2 font-21\">\r\n                                                    Total\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <div class=\"col-lg-6 align-self-end text-uppercase\">\r\n                                                <div class=\" text-right text-black font-21 fw-bold\">\r\n                                                    KES {{billDetails.billBalance}}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div class=\"mpesa-confirmation \">\r\n                                            <div v-if=\"paymentData.paymentMode=='MPESA'\">\r\n                                                <p class=\"text-muted mt-2\">A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to <strong class=\"text-black\"> phone number ({{ phoneNumber }})</strong> soon after you click the <strong class=\"text-black text-capitalize\">Send Request</strong> button bellow.\r\n                                                    <br>\r\n                                                    <br>\r\n                                                    Remember to <strong class=\"text-black\">Check your phone</strong> to confirm payment by entering your Mpesa pin.</p>\r\n                                            </div>\r\n\r\n                                            <div>{{message}}  </div>\r\n                                            <br>\r\n                                            <button @click=\"makePayment()\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect btn-send waves-light text-center w-100\">\r\n                                                <div class=\"d-flex justify-content-center align-items-center\">\r\n                                                    <div class=\"stk-timer-container d-none justify-content-center align-items-center\">\r\n                                                        <span class=\"mdi mdi-timer-outline font-16px\"></span>\r\n                                                        <span class=\"stk-timer px-2\"></span>\r\n                                                    </div>\r\n                                                    <div class=\"justify-content-center align-items-center d-flex\">\r\n                                                        <span class=\"px-2\">Send Request</span>\r\n                                                        <div class=\"flip-x\"><i class=\"mdi mdi-reply ms-3 font-16px\"></i></div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </button>\r\n                                        </div>\r\n\r\n\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div v-if=\"transactionCompleted\" class=\"text-center d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\r\n                                    <div class=\"success-image mb-4\">\r\n                                        <img src=\"assets/images/payment-confirmation-images/sent.svg\" height=\"200\" alt=\"\">\r\n                                    </div>\r\n                                    <h4 class=\"text-blink-primary fw-bold\">Transaction Complete</h4>\r\n                                    <p class=\"text-muted mb-4\"><strong class=\"text-black\">KES {{receiptDetails.receiptAmount}}</strong> has been received for <strong class=\"text-black\">Bill No. {{receiptDetails.billNo}}</strong></p>\r\n                                    <button @click=\"printReceipt()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\r\n                                        <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\r\n                                        Print Receipt\r\n                                    </button>\r\n                                </div>\r\n\r\n\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"modal-footer d-flex d-none bill-modal-footer\">\r\n                            <button href=\"javascript: void(0);\" disabled class=\"btn btn-outline-light waves-effect waves-light payment-prev\"> <i class=\"mdi mdi-arrow-left ms-1\"></i>Previouse</button>\r\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary waves-effect waves-light payment-next\">Next <i class=\"mdi mdi-arrow-right ms-1\"></i></button>\r\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect waves-light text-center d-none\">\r\n                                <div class=\"d-flex justify-content-center align-items-center\"> <span>Send Money</span> <div class=\"flip-x\"><i class=\"mdi mdi-reply flip-x ms-3 font-16px\"></i></div></div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- end of payment modal-->\r\n            <footer class=\"footer \">\r\n                <div class=\"container-fluid \">\r\n                    <div class=\"row \">\r\n                        <div class=\"col-sm-6 \">\r\n                           Â© County\r\n                        </div>\r\n                        <div class=\"col-sm-6 \">\r\n                            <div class=\"text-sm-end d-sm-block\">\r\n                                A product of County\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </footer>\r\n        </div>\r\n\r\n        </body>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import NavigationBar from \"@/components/Navigation\";\r\n    import {biller, execute, parking, rent, trade} from \"@/api\";\r\n    export default {\r\n        name: \"ReceiptsNew\",\r\n        components: {NavigationBar},\r\n        data(){\r\n            return{\r\n                confirmCash: false,\r\n                phoneNumber:'',\r\n                transactionCompleted: false,\r\n                transactionSummary: false,\r\n                paymentPanel: true,\r\n                paymentMethod: false,\r\n                paymentData: {\r\n                    accNo: null,\r\n                    payBillNo: null,\r\n                    amount: null,\r\n                    phoneNumber: null,\r\n                    success: false,\r\n                    paymentMode:null\r\n                },\r\n                billNo:'',\r\n                billDetails:{\r\n                    id: \"\",\r\n                    billNo: \"\",\r\n                    incomeTypeID: \"\",\r\n                    incomeTypeDescription: \"\",\r\n                    costCenterNo: \"\",\r\n                    accountNo: \",\",\r\n                    description: \"\",\r\n                    feeID: \"\",\r\n                    detailAmount: \"\",\r\n                    receiptAmount: \"\",\r\n                    billBalance: \"\",\r\n                    wardID: \"\",\r\n                    subCountyID: \"\",\r\n                    status: \"\",\r\n                    dateCreated: \"\"\r\n                },\r\n                billInfo:[],\r\n                message:null\r\n            }\r\n        },\r\n        mounted() {\r\n        },\r\n        methods:{\r\n            formatPrice(value) {\r\n                var formatter = new Intl.NumberFormat('en-US', {\r\n                    style: 'currency',\r\n                    currency: 'KES',\r\n                    minimumFractionDigits: 2\r\n                });\r\n                return formatter.format(value);\r\n            },\r\n            getBill(){\r\n                if(this.billNo === ''){\r\n                    alert('Please Enter Bill No')\r\n                }else {\r\n                    const data = new FormData();\r\n                    data.append(\"function\", \"getBill\");\r\n                    data.append(\"billNo\", this.billNo);\r\n                    execute(data,biller)\r\n                        .then((res) =>{\r\n                            if (res.data.success) {\r\n                                this.billDetails = res.data.data.billDetails\r\n                                this.billInfo = res.data.data.billInfo\r\n                                this.paymentData.amount = res.data.data.billDetails.billBalance\r\n                                this.paymentData.accNo = res.data.data.billDetails.billNo\r\n                            }else{\r\n                                this.message =res.data.message\r\n                            }\r\n                        })\r\n                        .catch((e) => {\r\n                            //alert(e.message);\r\n                            this.message =e.message\r\n                        });\r\n                }\r\n\r\n            },\r\n            showPaymentMethod(){\r\n                this.paymentMethod = true;\r\n                this.paymentPanel = false;\r\n                this.transactionSummary = false;\r\n                this.transactionCompleted = false\r\n            },\r\n            printBill(){\r\n                localStorage['params'] = JSON.stringify({\r\n                    billNo: this.billDetails.billNo\r\n                })\r\n                const routeData = this.$router.resolve({name: 'bill'});\r\n                window.open(routeData.href, '_blank');\r\n            },\r\n            printReceipt() {\r\n                if (this.receiptDetails.receiptNo == null) {\r\n                    alert(\"Try again later\");\r\n                } else {\r\n                    //  this.$refs.closeReceived.click();\r\n                    localStorage['params'] = JSON.stringify({\r\n                        receiptNo: this.receiptDetails.receiptNo\r\n                    })\r\n                    const routeData = this.$router.resolve({name: 'receipt'});\r\n                    window.open(routeData.href, '_blank');\r\n                }\r\n            },\r\n            showTransactionSummary(paymentMode){\r\n\r\n                this.paymentData.paymentMode = paymentMode\r\n\r\n                if(paymentMode === \"MPESA\") {\r\n                    if (this.phoneNumber == null) {\r\n                        alert(\"Enter phone number\");\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                this.paymentMethod = false;\r\n                this.paymentPanel = false;\r\n                this.transactionSummary = true;\r\n                this.transactionCompleted = false\r\n            },\r\n            makePayment() {\r\n                if(this.paymentData.paymentMode === \"MPESA\") {\r\n                    if (this.phoneNumber == null) {\r\n                        alert(\"Enter phone number\");\r\n                        return;\r\n                    }\r\n                }\r\n                this.message = \"Payment Request sent\";\r\n                this.paymentData.phoneNumber = this.phoneNumber\r\n\r\n                const data = new FormData();\r\n                data.append(\"function\", \"makePayment\");\r\n                data.append(\"paymentData\", JSON.stringify(this.paymentData));\r\n\r\n                let stream = null;\r\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\r\n                    stream = trade;\r\n                }\r\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\r\n                    stream = parking;\r\n                }\r\n\r\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\r\n                    stream = rent;\r\n                }\r\n\r\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\r\n                    stream = biller;\r\n                }\r\n\r\n                execute(data, stream)\r\n                    .then((res) => {\r\n                        if (res.data.success) {\r\n                            this.paymentMethod = false;\r\n                            this.paymentPanel = false;\r\n                            //start checking payment\r\n                            this.timer = setInterval(() => {\r\n\r\n                                this.checkPayment();\r\n                            }, 3000);\r\n                        } else {\r\n                            this.rate = null;\r\n                            alert(res.data.message);\r\n                        }\r\n                    })\r\n                    .catch((e) => {\r\n                        alert(e.message);\r\n                    });\r\n            },\r\n            checkPayment() {\r\n                this.randomNumber = Math.floor(Math.random() * 3) + 1\r\n                if(this.randomNumber === 1){\r\n                    this.message = \"Waiting for payment.\";\r\n                }\r\n                if(this.randomNumber === 2){\r\n                    this.message = \"Waiting for payment..\";\r\n                }\r\n                if(this.randomNumber ===3){\r\n                    this.message = \"Waiting for payment...\";\r\n                }\r\n                const data = new FormData();\r\n                data.append(\"function\", \"checkPayment\");\r\n                data.append(\"accountRef\", this.paymentData.accNo);\r\n\r\n                let stream = null;\r\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\r\n                    stream = trade;\r\n                }\r\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\r\n                    stream = parking;\r\n                }\r\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\r\n                    stream = rent;\r\n                }\r\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\r\n                    stream = biller;\r\n                }\r\n                execute(data, stream)\r\n                    .then((res) => {\r\n                        if (res.data.success) {\r\n                            clearInterval(this.timer);\r\n                            this.receipt = true;\r\n                            this.paymentData.success = false;\r\n                            this.transaction = res.data.data.transaction;\r\n                            this.receiptDetails = res.data.data.receipt.receiptDetails\r\n                            //Close the modal\r\n                            this.transactionSummary = false\r\n                            this.transactionCompleted = true\r\n                        }\r\n                    })\r\n                    .catch((e) => {\r\n                        alert(e.message);\r\n                    });\r\n            },\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}